<div
  [ngClass]="setupService.isTeamConfigured ? 'main-container' : 'popup-container'"
>
<div class="col-md-12 text-center">
  <div *ngIf="!setupService.isTeamConfigured" class="popup-heading">Aggregation Links Configuration</div>
</div>
  <!-- Team Links -->
  <div *ngIf="setupService.isTeamConfigured">
    <div class="row">
      <div class="col-md-8 text-left">
        <strong class="subHeading">Team Links</strong>
      </div>
      <div class="col-md-4 float-right">
        <a class="icon" data-toggle="modal" data-target="#addTeamLinkModal">
          + Add Link</a
        >
      </div>
    </div>
    <div class="spacing mt-3 ml-5">
      <table class="table table-borderless">
        <caption></caption>
        <thead>
          <tr>
            <th class="font-weight-light alignment" scope="col">
              <strong class="title">Link Name</strong>
            </th>

            <th class="font-weight-light alignment margin" scope="col">
              <strong class="title">Link URL</strong>
            </th>
            <th class="font-weight-light alignment pl-5" scope="col">
              <strong class="title">Type</strong>
            </th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody *ngIf="this.usefullLinks">
          <tr *ngFor="let usefullLink of usefullLinks">
            <th class="row-text alignment text-weight" id="title">
              {{ usefullLink.linkName | titlecase }}
            </th>
            <td class="row-text alignment margin">
              <a class="link" (click)="openLink(usefullLink)">
                {{ usefullLink.links | shortUrl }}
              </a>
            </td>
            <td class="row-text alignment pl-5">
              {{ usefullLink.linkType | linkTypeFilter | titlecase }}
            </td>
            <td>
              <span
                class="icon"
                data-toggle="modal"
                data-target=".bd-example-modal-sm"
                (click)="saveSeletedLink(usefullLink.teamLinkId)"
              >
                <span class="material-icons-outlined mat-icon">
                  delete
                </span></span
              >
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Aggregation Links -->
  <div>
    <div class="row">
      <div class="col-md-8 text-left">
        <strong *ngIf="setupService.isTeamConfigured" class="subHeading">Aggregation Service Links</strong>
      </div>
      <div class="col-md-4 float-right">
        <a class="icon" data-toggle="modal" data-target="#addAggregationLinkModel">
          + Add Link</a
        >
      </div>
    </div>
    <div class="spacing mt-3 ml-5">
      <table class="table table-borderless">
        <caption></caption>
        <thead>
          <tr>
            <th class="font-weight-light alignment" scope="col">
              <strong class="title">Serial No &nbsp;&nbsp;</strong>
            </th>
            <th class="font-weight-light alignment margin" scope="col">
              <strong class="title">Link URL</strong>
            </th>
            <th class="font-weight-light alignment pl-5" scope="col">
              <strong class="title">Type</strong>
            </th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody *ngIf="this.aggregationLinks">
          <tr *ngFor="let aggregatorLink of aggregationLinks; let i = index" [attr.data-index]="i">
            <th class="row-text alignment text-weight" id="title">
              {{ i+1 }}
            </th>
            <td class="row-text alignment margin">
              <a class="link" (click)="openLink(aggregatorLink)">
                {{ aggregatorLink.links | shortUrl }}
              </a>
            </td>
            <td class="row-text alignment pl-5">
              {{ aggregatorLink.linkType | linkTypeFilter | titlecase }}
            </td>
            <td>
              <span
                class="icon"
                data-toggle="modal"
                data-target=".bd-example-modal-sm"
                (click)="saveSeletedLink(aggregatorLink.teamLinkId)"
              >
                <span class="material-icons-outlined mat-icon">
                  delete
                </span></span
              >
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>


</div>


<!-- Save and next buttons -->
<div *ngIf="!setupService.isTeamConfigured" class="row justify-content-end mt-2 mr-2">
  <div class="button mr-4" (click)="previous()">
    <button class="btn btn-outline btn-cg">Previous</button>
  </div>
  <div class="button mr-4" data-toggle="modal" data-target="#skipModel">
    <button class="btn btn-outline btn-cg">Skip</button>
  </div>
  <div class="button mr-4" (click)="finishConfiguration()">
    <button class="btn btn-outline btn-cg">Finish</button>
  </div>
</div>

<!--Delete-Link modal -->

<div
  class="modal fade bd-example-modal-sm"
  tabindex="-1"
  role="dialog"
  aria-labelledby="mySmallModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-header pl-5">
        <h5 class="modal-title pl-5" id="exampleModalLabel">Delete Link</h5>

        <button
          type="button"
          class="close icon"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body pt-3 pb-1">
        <p>Are you sure you want to delete this Link?</p>
      </div>
      <div class="footer pb-4">
        <div>
          <button
            type="button"
            class="btn btn-basic btn-custom btn-cg-color mr-2 ml-3"
            data-dismiss="modal"
          >
            No,go back
          </button>
          <button
            type="button"
            class="btn btn-basic btn-custom btn-cg-color ml-2 mr-2"
            data-dismiss="modal"
            (click)="deleteLink()"
          >
            Yes,delete
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!--Add-Team-Link modal -->

<div
  class="modal fade"
  id="addTeamLinkModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="addTeamLinkModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header pl-4">
        <h5 class="modal-title pl-2" id="addTeamLinkModalLabel">Add Team Links</h5>
        <button
          type="button"
          class="close icon"
          (click)="close()"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body pb-1">
        <app-add-links></app-add-links>
      </div>
      <div class="footer pt-2 pb-4">
        <div class="row">
          <div class="col-md-4"></div>
          <div class="col-md-8">
            <button
              type="button"
              class="btn btn-basic btn-custom btn-cg-color mr-2 ml-3"
              data-dismiss="modal"
              (click)="close()"
            >
              Close
            </button>
            <button
              type="button"
              class="btn btn-basic btn-custom btn-cg-color ml-2 mr-2"
              data-dismiss="modal"
              (click)="addLink()"
            >
              Save
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<!--Add-Aggregation-Link modal -->

<div
  class="modal fade"
  id="addAggregationLinkModel"
  tabindex="-1"
  role="dialog"
  aria-labelledby="addAggregationLinkModelLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header pl-4">
        <h5 class="modal-title pl-2" id="addAggregationLinkModelLabel">Add Aggregation Links</h5>
        <button
          type="button"
          class="close icon"
          (click)="close()"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body pb-1">
        <app-add-aggregator-links></app-add-aggregator-links>
      </div>
      <div class="footer pt-2 pb-4">
        <div class="row">
          <div class="col-md-4"></div>
          <div class="col-md-8">
            <button
              type="button"
              class="btn btn-basic btn-custom btn-cg-color mr-2 ml-3"
              data-dismiss="modal"
              (click)="close()"
            >
              Close
            </button>
            <button
              type="button"
              class="btn btn-basic btn-custom btn-cg-color ml-2 mr-2"
              data-dismiss="modal"
              (click)="addLink()"
            >
              Save
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



<div
  class="modal fade bd-example-modal-sm"
  id="skipModel"
  tabindex="-1"
  role="dialog"
  aria-labelledby="skipModelLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-header pl-5">
        <h5 class="modal-title pl-5" id="skipModelLabel">Team Setup</h5>

        <button
          type="button"
          class="close icon"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body pt-3 pb-1">
        <p>Are you sure you want to skip admin configuration?</p>
      </div>
      <div class="footer pb-4">
        <div>
          <button
            type="button"
            class="btn btn-basic btn-custom btn-cg-color mr-2 ml-3"
            data-dismiss="modal"
          >
            No,go back
          </button>
          <button
            type="button"
            class="btn btn-basic btn-custom btn-cg-color ml-2 mr-2"
            data-dismiss="modal"
            (click)="skip()"
          >
            Yes
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

